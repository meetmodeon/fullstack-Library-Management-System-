<div class="sub-category">
  <div class="add-category w-full p-4">
    <div class="w-full flex justify-end">
      <div
        class="text-black rounded-2xl shadow shadow-gray-800 px-4 border border-black inline-block transform active:scale-90 cursor-pointer"
      >
        <button (click)="openAddForm()">New Sub_Category</button>
      </div>
    </div>
  </div>
  <p-divider></p-divider>
  <div class="container mx-auto">
    <div class="show-category">
      <div class="card">
        <p-table
          [value]="sub_categoryListData"
          [paginator]="true"
          [rows]="rowNo()"
          [rowsPerPageOptions]="[5, 10, 20]"
          [tableStyle]="{ 'min-width': '50rem' }"
          [loading]="false"
          (onPage)="onPageChange($event)"
        >
          <ng-template #header>
            <tr>
              <th style="width: 20%">Id</th>
              <th style="width: 20%">SubCategory Name</th>
              <th style="width: 20%">Category Name</th>
              <th style="width: 40%">Action</th>
            </tr>
          </ng-template>
          <ng-template #body let-subCategory>
            <tr>
              <td>{{ subCategory.subCategoryId }}</td>
              <td>{{ subCategory.name | capitalization }}</td>
              <td>
                {{ getCategoryName(subCategory.categoryId) | capitalization }}
              </td>
              <td>
                <div class="space-x-10 gap-2 *:transform *:active:scale-90">
                  <button
                    class="px-4 text-black hover:bg-gray-200 rounded-2xl border border-black"
                    (click)="openEditForm(subCategory.subCategoryId)"
                  >
                    Edit
                  </button>
                  <button
                    class="px-4 text-black hover:bg-gray-200 rounded-2xl border border-black"
                    (click)="onDelete(subCategory.subCategoryId)"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
<div class="dialog-form">
  <p-dialog
    header="Edit Profile"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '35rem' }"
  >
  <ng-template #header>
     <span><strong>{{isEditMode?'Update':'Add'}} SubCategory</strong></span>
  </ng-template>
   
    <form [formGroup]="sub_categoryFormGroup" (ngSubmit)="addSubCategory()">
      <div class="flex items-center gap-4 mb-4">
        <label for="sub_categoryName" class="font-semibold w-24"
          >SubCategory Name</label
        >
        <input
          pInputText
          id="username"
          formControlName="name"
          class="flex-auto"
          autocomplete="off"
        />
        <p
          *ngIf="hasError('subCategoryName', 'required')"
          class="text-red-500 text-xs"
        >
          SubCategory Name is required
        </p>
      </div>
      <div class="flex items-center gap-4 mb-8">
        <label for="description" class="font-semibold w-24">Description</label>
        <input
          pInputText
          formControlName="description"
          class="flex-auto"
          autocomplete="off"
        />
      </div>
      <div class="flex items-center gap-6 mb-8 w-full">
        <label for="description" class="font-semibold">Category Name</label>
        <select
          formControlName="categoryId"
          class="w-full border border-gray-300 rounded-md p-2"
        >
          @for (category of categoryListData; track $index) {
          <option [value]="category.categoryId">
            {{ category.name | capitalization }}
          </option>
          }
        </select>
      </div>
      <p
        *ngIf="hasError('subCategoryName', 'required')"
        class="text-red-500 text-xs"
      >
        Category Name is required
      </p>
      <div class="flex justify-end gap-2">
        <p-button
          label="Cancel"
          severity="secondary"
          (click)="visible = false"
        />
        <p-button type="submit" [label]="isEditMode?'Update':'Save'"  />
      </div>
    </form>
  </p-dialog>
</div>
